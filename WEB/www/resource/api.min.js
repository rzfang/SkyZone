"use strict";function FrameShow(t,e,n,r){if("object"!=typeof t)return 0;if(e="number"!=typeof e?t.css("left"):e,n="number"!=typeof n?t.css("top"):n,"function"!=typeof r&&(r=function(){}),t.get(0).ToFront(),"none"!==t.css("display"))return t.animate({left:e,top:n}),0;var i=Math.round(3*Math.random());switch(t.css({left:e,top:n}),i){case 1:t.slideDown("normal",r);break;case 2:t.fadeIn("normal",r);break;case 0:default:t.show("normal",r)}}function FrameHide(t){var e=Math.round(3*Math.random());switch(e){case 1:t.slideUp("normal");break;case 2:t.fadeOut("normal");break;case 0:default:t.hide("normal")}}function RelatedFrameRectangle(t,e,n){if("object"!=typeof t||"object"!=typeof e)return 0;("object"!=typeof n||n.length<2)&&(n=[0,0]);var r=$("#Main"),i=r.offset(),a=[i.left,i.top,r.innerWidth(),r.innerHeight()],o=t.offset(),s=[o.left,o.top,t.innerWidth(),t.innerHeight()],d=[s[0]+s[2]+n[0]+5,s[1]+n[1],e[0],e[1]];return d[0]+d[2]>a[2]+a[0]&&(d[0]=s[0]-d[2]-5+a[0]+n[0]),d[0]<a[0]&&(d[0]=a[0]+n[0]),d[1]+d[3]>a[3]+a[1]&&(d[1]=a[3]-d[3]+a[1]-5),d[1]<a[1]&&(d[1]=a[1]+5),d}function BaseFrameXGet(t){if("object"!=typeof t)return 0;for(var e=[$("#BlgLstFrm"),$("#MsgBrdFrm"),$("#TtlLstFrm")],n=0,r=99999,i=0;i<e.length;i++)if(void 0!==e[i]&&0!==e[i].length&&t.attr("id")!==e[i].attr("id")&&"none"!==e[i].css("display")){var a=e[i].offset();n=Math.max(n,a.left+e[i].width()+5),r=Math.min(r,a.left-5)}99999===r&&(r=0);var o=t.width();return r>o?r-o:n}function AboutFrame(t){function e(){return TabBox("#AbtBx","#AbtBx > div.AbtPg",0)}var n="ItdFrm",r=$("#"+n);if(r.length>0)return FrameShow(r),0;r=Frame("#Main",640,480,e,"Frm",t,!0),r.attr({id:n}).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(r)});var i=$("#Main");return FrameShow(r,(i.width()-r.outerWidth())/2,i.offset().top+5),0}function BlogListFrame(t){function e(){var t=$("#BlogLstBx"),e=t.parent(),o=e.find("> div:first > input:button");return ItemList(t,"service.php",5,{Cmd:1},n,["LstIdxTg","LstIdxTgDsb"]),o.first().on("click",i).end().eq(1).on("click",r),t.on("click",".OneBlog",a),e}function n(t){var e=$("#OneBlog").clone().removeAttr("id");if(e.attr("id",t.ID).data("Pswd",t.Pswd).children("div:first").text(t.Ttl).end().children("div:eq(2)").text(t.Smry).end().find("> div:last > span:last").text(t.Dt.substr(0,10)),"object"==typeof t.Tg&&t.Tg.length>0)for(var n in t.Tg){var r=t.Tg[n];$("<span/>").text(r.Nm).attr("name",r.ID).appendTo(e.children("div:eq(1)"))}if(t.Pswd.length>0){var i=$("<span/>");i.addClass("IcoBlogTp IcoBlogLck").attr({title:"上鎖的文章"}).prependTo(e.find("> div:last > span:last"))}switch(t.Tp){case"text":$("<span/>").addClass("IcoBlogTp IcoBlogTxt").attr({title:"文章"}).prependTo(e.find("> div:last > span:last"));break;case"image":$("<span/>").addClass("IcoBlogTp IcoBlogImg").attr({title:"圖文"}).prependTo(e.find("> div:last > span:last"));break;case"images":$("<span/>").addClass("IcoBlogTp IcoBlogImgs").attr({title:"相簿"}).prependTo(e.find("> div:last > span:last"))}return e}function r(t){t.stopPropagation(),$(t.currentTarget).attr({id:"00000000000000000000000000000000",name:"random"}),a(t)}function i(t){function e(t){t.stopPropagation(),$(this).closest("div").prev("div").find("input:checkbox").prop("checked",!1),ItemList("#BlogLstBx","service.php",5,{Cmd:1,TgIDA:[]},n,["LstIdxTg","LstIdxTgDsb"]),FrameHide(a)}function r(t){t.stopPropagation();var e=[];$(this).closest("div").prev("div").find("input:checkbox:checked").each(function(){e.push($(this).val())}),ItemList("#BlogLstBx","service.php",5,{Cmd:1,TgIDA:e},n,["LstIdxTg","LstIdxTgDsb"]),FrameHide(a)}t.stopPropagation();var i="TgLstFrm",a=$("#"+i),o=[0,0];return"object"==typeof a&&a.length>0?(o=RelatedFrameRectangle(s,[a.outerWidth(),a.outerHeight()]),FrameShow(a,o[0],o[1]),1):($.ajax({type:"POST",dataType:"json",timeout:2e4,url:"service.php",data:{Cmd:7},success:function(t){if(t.Index<0)return alert(t.Message),-1;var n=$("#TgLstBx").children(),d=n.first(),l=$('<div><label><input type="checkbox"/><span/></lable></div>');for(var c in t.Extend){var f=t.Extend[c],h=l.clone().addClass("OneTg").appendTo(d);h.children("label").children("input:checkbox").val(f.ID).end().children("span").addClass("Block").text(f.Nm)}n.eq(1).children("input:button").first().on("click",e).end().eq(1).on("click",r),a=Frame("#Main",200,200,function(){return n},"Frm","標籤過濾",!0),a.attr("id",i).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(a)}),o=RelatedFrameRectangle(s,[a.outerWidth(),a.outerHeight()]),FrameShow(a,o[0],o[1])}}),0)}function a(t){t.stopPropagation();var e=$(t.currentTarget),n=e.attr("id"),r=e.children("div:first").text(),i=(e.data("Pswd"),"random"===e.attr("name"));if(0===n.length)return-1;var a=$("#Frm_"+n);if(a.length>0){var o=e.closest(".Frm"),s=RelatedFrameRectangle(o,[a.width(),a.height()],[0,e.offset().top-o.offset().top]);return FrameShow(a,s[0],s[1]),1}BlogOneFrame(n,i,r,t.currentTarget)}{var o="BlgLstFrm",s=$("#"+o),d=[280,520];$("#MsgBrdFrm")}return s.length>0?(FrameShow(s),0):(s=Frame("#Main",d[0],d[1],e,"Frm",t,!0),s.attr({id:o}).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(s)}),FrameShow(s,BaseFrameXGet(s)),0)}function BlogOneFrame(t,e,n,r,i){function a(t){var e=$("<div><pre/></div>");e.addClass("Blog Text").children(":first-child").html(TextToHTML(t.Info.Str));var n=Frame("#Main",515,400,function(){return e},"Frm",t.Ttl,!0);return n.attr("id","Frm_"+t.ID)}function o(t){function e(){var t=$(this);t.width()>t.height()&&t.after("<br/>")}var n=[400,380],r=$("<div><img/><pre/><br/></div>");r.addClass("Blog Img").children("img").attr({src:t.Info.ImgURL,title:"縮圖/原圖切換"}).css({maxWidth:n[0],maxHeight:n[1]}).on("click",[n[0],n[1]],d).on("click",function(){$(this).closest(".Frm").find("> div:first > span:last > span:eq(2)").click()}).one("load",e).end().children("pre").html(TextToHTML(t.Info.Str));var i=Frame("#Main",515,400,function(){return r},"Frm",t.Ttl,!0);return i.attr("id","Frm_"+t.ID),i}function s(t){var e=[400,300],n=$("<div/>").addClass("Blog Imgs");for(var r in t.Lst){var i=t.Lst[r],a=$("<div><img/><div><span>▲</span> <span/></div></div>");a.css({minWidth:e[0]}).children("img").addClass("Unload").attr("src",i.TbnURL).data("TglSzURL",i.ImgURL).css({maxWidth:e[0],maxHeight:e[1]}).on("click",[e[0],e[1]],d).on("load",function(){$(this).removeClass("Unload")}).end().find("> div:first > span:eq(1)").css({maxWidth:e[0]-10}).html(TextToHTML(i.Str)).end().appendTo(n),0===i.Str.length&&a.find("> div > span:first").text("")}var o=Frame("#Main",515,400,function(){return n},"Frm",t.Ttl,!0);return o.attr("id","Frm_"+t.ID),o}function d(t){t.stopPropagation();var e=$(t.currentTarget),n=[e.css("maxWidth"),e.css("maxHeight")],r="none"===n[0]||0===n[0].length?t.data[0]:"",i="none"===n[1]||0===n[1].length?t.data[1]:"",a=e.data("TglSzURL");if(e.css({maxWidth:r,maxHeight:i}),"string"==typeof a&&a.length>0){var o=e.attr("src");o!==a&&e.attr("src",a).data("TglSzURL",o)}}function l(t,e,n){function r(t){return 13!==t.keyCode?-1:void i(t)}function i(e){var n=$(e.currentTarget).siblings().addBack().filter("input:password:first").val();t(n)}if("function"!=typeof t)return-1;var a="PswdFrm",o=$("#"+a),s=$("#PswdBx"),d=$(n),l=d.closest(".Frm"),c=null;if(o.length>0)c=RelatedFrameRectangle(l,[o.width(),o.height()],[0,d.offset().top-l.offset().top]);else{var f=$("#Main");o=Frame(f,280,100,function(){return s},"Frm","輸入密碼",!0),o.attr({id:a}).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(o)}),c=0===d.length||0===l.length?[(f.width()-o.outerWidth())/2,30]:RelatedFrameRectangle(l,[o.width(),o.height()],[0,d.offset().top-l.offset().top])}e="string"==typeof e&&e.length>0?"請輸入「"+e+"」的密碼:":"請輸入密碼:";var h=s.find("> div:first > span.Block:first").text(e).end().children("input:button:first").off("click").on("click",i).end().children("input:password:first").off("keypress").on("keypress",r).val("");return FrameShow(o,c[0],c[1]),setTimeout(function(){h.focus()},1e3),0}function c(t){$(t.currentTarget).next("span").toggle()}function f(t){var e=$(this),n=e.find("> span:last input:button:first");"number"!=typeof t&&(t=0),n.val(t>0?"訪客回應 ("+t.toString()+")":"訪客回應"),e.data("CmtCnt",t)}function h(){var t=$(this),e=t.data("CmtCnt");return"undefined"==typeof e&&(e=0),e}return"string"!=typeof t||0===t.length?-1:(e="boolean"==typeof e&&e?1:0,"string"!=typeof i&&(i=""),$.ajax({type:"POST",dataType:"json",timeout:2e4,url:"service.php",data:{Cmd:2,ID:t,Rdm:e,Pswd:i},success:function(i){if(i.Index<0)return alert(i.Index+", "+i.Message),-1;if(i.Index>0)return i.Index>1&&alert(i.Message),l(function(i){BlogOneFrame(t,e,n,r,i)},n,r),-2;var d=$("#PswdFrm");d.length>0&&FrameHide(d);var u=null;switch(i.Extend.Tp){case"text":u=a(i.Extend);break;case"image":u=o(i.Extend);break;case"images":u=s(i.Extend);break;default:return alert("working on it."),0}var p=u.get(0),m=$('<span><input type="checkbox"/><span/></span>');p.CommentCountSet=f,p.CommentCountGet=h,m.addClass("Ftr").appendTo(u).children("input:checkbox").attr("title","進階選項").change(c).end().children("span").css({display:"none"});var g=$("<div><span/><span></div>");if(g.appendTo(m.children("span:first")).children("span").first().text("建立時間：").end().last().text(i.Extend.Dt),i.Extend.TgA.length>0){var v=$("<div><span/><span/></div>");v.appendTo(m.children("span:first")).children("span").first().text("標籤：");for(var x in i.Extend.TgA){var F=i.Extend.TgA[x];$("<span/>").attr("name",F.ID).text(F.Nm).appendTo(v.children("span:last"))}}var C=$("<div><span/><a/><a/><a/><a/><a/></div>"),T=encodeURIComponent(i.Extend.URL),b="http://www.facebook.com/share.php?u="+T,k="https://plus.google.com/share?url="+T,w="http://twitter.com/intent/tweet?url="+T,M="http://www.plurk.com/?qualifier=shares&status="+T+" ("+n+")";C.appendTo(m.children("span:first")).children("span:first").text("分享網址：").end().children("a").attr("target","_blank").eq(0).addClass("IcoShr IcoLnk").attr({href:i.Extend.URL,title:"直接連結"}).end().eq(1).addClass("IcoShr IcoFb").attr({href:b,title:"分享至 Facebook"}).end().eq(2).addClass("IcoShr IcoGp").attr({href:k,title:"分享至 Google+"}).end().eq(3).addClass("IcoShr IcoTtr").attr({href:w,title:"分享至 Twitter"}).end().eq(4).addClass("IcoShr IcoPlk").attr({href:M,title:"分享至 Plurk"}),i.Extend.Pswd.length>0&&$("<span/>").addClass("IcoBlogTp IcoBlogLck").attr({title:"上鎖的文章"}).prependTo(C);var I=$('<input type="button"/>');I.appendTo(m.children("span:first")).addClass("Btn0").on("click",BlogCommentListFrame),p.CommentCountSet("undefined"!=typeof i.Extend.CmtCnt&&i.Extend.CmtCnt>0?parseInt(i.Extend.CmtCnt,10):0);var L=[u.width(),u.height()],B=[0,0];if("object"==typeof r&&null!==r){var S=$(r),y=S.closest(".Frm");B=RelatedFrameRectangle(y,L,[0,S.offset().top-y.offset().top])}else B=[Math.max(($(document).width()-L[0])/2,0),30];FrameShow(u,B[0],B[1])}}),0)}function BlogCommentListFrame(t){function e(){var t=$("#BlogCmtLstBx").clone().removeAttr("id").children(),e=$("#LvBx").clone().removeAttr("id");return t.last().children("input:button").on("click",n).end().append(e).children("div:last").css({padding:5,borderWidth:1,borderRadius:5}).hide().find("input:button").on("click",r),"string"==typeof CO.GstNm&&t.last().find("input:text.Nm").val(CO.GstNm).end().find("input:checkbox.RmbMe").prop("checked",!0),ItemList(t.first(),"service.php",-1,{Cmd:8,ID:l},i,[]),t}function n(){var t=$(this),e=t.next();if("none"===e.css("display")){var n=t.parent().prev();t.val("取消留言"),e.show().find("input:text:first").focus(),n.parent().animate({scrollTop:n.height()},0)}else t.val("新留言"),e.hide()}function r(t){t.stopPropagation();var e=$(this),n=e.closest(".Frm").attr("id").replace("BlogCmtLstFrm_",""),r=e.parent(),i=r.find("input:text.Ml"),a=r.find("textarea:first"),o={Cmd:9,TgtID:n,Nm:Trim(r.find("input:text.Nm").val()),Ml:Trim(i.val()),Cmt:Trim(a.val())},s=r.find("input:checkbox.RmbMe").prop("checked"),d="";return"string"!=typeof o.TgtID||0===o.TgtID.length?(alert("出錯了!!!"),-1):(0===o.Nm.length&&(o.Nm="匿名",$("#Nm").val(o.Nm)),s?(CookieSet("GstNm",o.Nm,CO.LfTm),CO.GstNm=o.Nm):(CookieSet("GstNm",o.Nm,-1*CO.LfTm),CO.GstNm=""),0===o.Ml.length?d+="尚未填寫 E-Mail。\n":IsEMail(o.Ml)||(d+="E-Mail 不符合標準格式。\n"),0===o.Cmt.length?d+="尚未填寫任何留言。\n":o.Cmt.length>255&&(d+="留言請勿超個 255 個字。\n"),d.length>0?(alert("請留意以下說明：\n"+d),0):void $.ajax({type:"POST",dataType:"json",timeout:2e4,url:"service.php",data:o,beforeSend:function(){e.get(0).Lock()},error:function(){alert("出錯了!!!")},complete:function(){e.get(0).Unlock()},success:function(t){if(t.Index<0)return alert(t.Index+", "+t.Message),0;i.add(a).val(""),r.prev("input:button").click().parent().prev().get(0).PageGet(0);var e=$("#Frm_"+n);if(e.length>0){var o=e.get(0);o.CommentCountSet(o.CommentCountGet()+1)}}}))}function i(t,e){var n=$("#OneMsgCmt").clone().removeAttr("id");return e=parseInt(e,10)+1,n.children().first().text(t.Nm).end().eq(1).html(TextToHTML(t.Cmt)).end().eq(2).text(t.Dt).end().last().text("#"+e.toString()),n}t.stopPropagation();var a=$(this),o=a.closest(".Frm"),s=o.find("> div:first > span:first").text()+" > 訪客留言",d=[],l=o.attr("id").replace("Frm_",""),c="BlogCmtLstFrm_"+l,f=$("#"+c);return f.length>0?(d=RelatedFrameRectangle(o,[f.width(),f.height()]),FrameShow(f,d[0],d[1]),0):(f=Frame("#Main",360,320,e,"Frm",s,!0),d=RelatedFrameRectangle(o,[f.width(),f.height()]),f.attr("id",c),FrameShow(f,d[0],d[1]),0)}function MessageListFrame(t){function e(){return ItemList(l,"service.php",5,{Cmd:3},n,["LstIdxTg","LstIdxTgDsb"]),$("#NewMsgBtn").on("click",r),$("#RldMsgLstBtn").on("click",i),l.on("click",".OneMsg > input:button:last-child",a),l.parent("div")}function n(t){var e=$("#OneMsg").clone().removeAttr("id"),n=e.attr({id:t.ID}).children().first().text(t.Nm).end().eq(1).html(TextToHTML(t.Msg)).end().eq(2).text(t.Dt).end().last();return!isNaN(t.ChnCnt)&&t.ChnCnt>0?n.val(t.ChnCnt).show():(n.val(n.attr("title")),e.on({mouseenter:function(){$(this).children("input:button:last").toggle()},mouseleave:function(){$(this).children("input:button:last").toggle()}})),e}function r(t){t.stopPropagation();var e="MsgLvFrm",n=$("#"+e),r=$(this),i=r.closest(".Frm"),a=null,s=null;return n.length>0?(a=n.find(".LvBx"),s=RelatedFrameRectangle(i,[n.width(),n.height()]),a.children("input:text.Ml, textarea").val(""),FrameShow(n,s[0],s[1])):(a=$("#LvBx").clone().removeAttr("id"),n=Frame("#Main",360,200,function(){return a},"Frm","新留言",!0),s=RelatedFrameRectangle(i,[n.width(),n.height()]),a.children("input:button:last").on("click",o),n.attr("id",e).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(n)}),FrameShow(n,s[0],s[1])),"string"!=typeof CO.GstNm||0===CO.GstNm.length?a.children("input:text:first").val("").focus().end().find("> label > input:checkbox:first").prop("checked",!1):a.children("input:text.Nm").val(CO.GstNm).focus().end().find("> label > input:checkbox:first").prop("checked",!0),0}function i(){var t=l.get(0),e=parseInt($("#MxLmt").val(),10);t.LimitSet(e),t.Recount(function(){t.PageGet(0)})}function a(t){function e(){var t=$("#MsgChnBx").clone().removeAttr("id"),e=$("#LvBx").clone().removeAttr("id");return t.children("div:first").replaceWith(s.clone().removeAttr("id")).end().children("div:first").children("input:button:last").remove().end().end().children("div:last").append(e).children("input:button:first").on("click",n).end().children("div:first").hide().css({padding:5,borderWidth:1,borderRadius:5}).children("input:button:last").on("click",o),ItemList(t.children("div:eq(1)"),"service.php",-1,{Cmd:5,ID:d},r,[]),t}function n(){var t=$(this),e=t.next("div");if("none"===e.css("display")){var n=t.parent().parent();t.val("取消留言"),e.show().children("input:text:first").focus(),n.parent().animate({scrollTop:n.height()},0),"string"==typeof CO.GstNm&&CO.GstNm.length>0&&e.children("input:text:first").val(CO.GstNm).end().find("> label:first > input:checkbox:first").prop("checked",!0)}else t.val("新留言"),e.hide().children("input:text").val("").end().children("textarea").val("")}function r(t,e){var n=$("#OneMsgCmt").clone().removeAttr("id");return e=parseInt(e,10)+1,n.attr({id:t.ID}).children().first().text(t.Nm).end().eq(1).html(TextToHTML(t.Msg)).end().eq(2).text(t.Dt).end().eq(3).text("#"+e.toString()),n}var i,a=$(t.currentTarget),s=a.parent(),d=s.attr("id"),l=$("#Msg_"+d),c=s.children("div:first").text()+" 的留言串",f=a.closest(".Frm");return l.length>0?(i=RelatedFrameRectangle(f,[l.width(),l.height()],[0,a.offset().top-f.offset().top]),FrameShow(l,i[0],i[1]),0):(l=Frame("#Main",360,320,e,"Frm",c,!0),i=RelatedFrameRectangle(f,[l.width(),l.height()],[0,a.offset().top-f.offset().top]),l.attr("id","Msg_"+d),FrameShow(l,i[0],i[1],function(){l.find("> div:first > span:last > span:eq(1)").click().click()}),l.get(0).ChainReload=function(){l.find(".MsgChnBx > div:eq(1)").get(0).PageGet(0)},0)}function o(){var t=$(this),e=t.closest(".Frm").attr("id").replace(/^Msg_|^MsgLvFrm/,""),n={Cmd:4,Nm:Trim(t.prevAll("input:text.Nm:first").val()),Ml:Trim(t.prevAll("input:text.Ml:first").val()),Msg:Trim(t.prevAll("textarea.Msg:first").val())},r=t.prev("label").children("input:checkbox").prop("checked"),i="";return 0===n.Nm.length&&(n.Nm="匿名"),r?(CookieSet("GstNm",n.Nm,CO.LfTm),CO.GstNm=n.Nm):(CookieSet("GstNm",n.Nm,-1*CO.LfTm),CO.GstNm=""),0===n.Ml.length?i+="尚未填寫 E-Mail。\n":IsEMail(n.Ml)||(i+="E-Mail 不符合標準格式。\n"),0===n.Msg.length?i+="尚未填寫任何留言。\n":n.Msg.length>255&&(i+="留言請勿超個 255 個字。\n"),i.length>0?(alert("請留意以下說明：\n"+i),0):("string"==typeof e&&e.length>0&&(n.Tgt=e),void $.ajax({type:"POST",dataType:"json",timeout:2e4,url:"service.php",data:n,beforeSend:function(){t.get(0).Lock()},error:function(){alert("出錯了!!!")},complete:function(){t.get(0).Unlock()},success:function(n){if(n.Index<0)return alert(n.Index+", "+n.Message),0;var r=$("#Msg_"+e);r.length>0&&r.get(0).ChainReload(),t.parent().prev("input:button").click(),$("#RldMsgLstBtn").click(),FrameHide($("#MsgLvFrm"))}}))}{var s="MsgBrdFrm",d=$("#"+s),l=$("#MsgLstBx"),c=[320,520];$("#BlgLstFrm"),$("#TtlLstFrm")}return d.length>0?(FrameShow(d),0):(d=Frame("#Main",c[0],c[1],e,"Frm",t,!0),d.attr({id:s}).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(d)}),FrameShow(d,BaseFrameXGet(d)),0)}function TutorialListFrame(t){function e(){function t(t,e){var n=$("<div/>");return n.addClass("OneItm OneTtrl").data("URL","text_read.php?Fl="+encodeURIComponent(t)).attr("name","Tutorial_"+e.toString()).text(t),n}function e(t){function e(){var t=$("<iframe/>");return t.attr("src",a).css({width:o[0],height:o[1]-1,border:"0px"}),t}function n(){var t=d.children("div:eq(1)");d.find("iframe:first").css({width:t.width(),height:t.height()-1})}var r=$(t.currentTarget),i=r.text(),a=r.data("URL"),o=[640,480],s=r.attr("name"),d=$("#"+s);0===d.length&&(d=Frame("#Main",o[0],o[1],e,"Frm",i,!0),d.get(0).ActionExtend("SizeChange",n)),FrameShow(d,BaseFrameXGet(d))}var n=$("<div/>");return ItemList(n,"service.php",-1,{Cmd:10},t,!0),n.on("click","> div",e),n}var n="TtlLstFrm",r=$("#"+n);return r.length>0?(FrameShow(r),0):(r=Frame("#Main",240,240,e,"Frm",t,!0),r.attr({id:n}).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(r)}),FrameShow(r,BaseFrameXGet(r)),0)}function CustomFrame(t){function e(){var t=$('<input type="text"/><br/><span/><br/><input type="button"/>');return t.filter("span:first").text("(部分網站會禁止其它網站的內嵌引用。)").css("color","#ff0000").end().filter("input").css("marginTop",10).filter(":text:first").on("keypress",n).end().filter(":button:first").val("確定").addClass("Btn0").on("click",r),t}function n(t){13===t.keyCode&&$(this).nextAll("input:button:first").click()}function r(){function t(){var t=$("<iframe/>");return t.attr("src",r).css({width:n[0],height:n[1],border:"0px"}),t}function e(){var t=s.children("div:eq(1)");t.children("iframe").width(t.width()).height(t.height())}var n=[640,480],r=$(this).prevAll("input:text").val();if(0===r.length)return 0;var i=r.substr(0,7);"http://"!==i&&"https:/"!==i&&(r="http://"+r),FrameHide(a);var o=$("#Main"),s=Frame("#Main",n[0],n[1],t,"Frm",r,!0);return s.get(0).ActionExtend("SizeChange",e),FrameShow(s,(o.width()-s.outerWidth())/2,o.offset().top+5),0}var i="CstURLFrm",a=$("#"+i),o=[320,100];if(a.length>0)return FrameShow(a,null,null,function(){a.find("> div:eq(1) > input:text:first").focus()}),0;a=Frame("#Main",o[0],o[1],e,"Frm",t,!0),a.attr({id:i}).get(0).ActionExtend("CloseButtonClick",function(){FrameHide(a)});var s=$("#Main"),d=a.children("div:eq(1)").css("textAlign","center").children("input:text:first");return FrameShow(a,(s.width()-a.outerWidth())/2,s.offset().top+5,function(){d.focus()}),0}function GoodWordsSet(){function t(){$.ajax({type:"POST",dataType:"json",timeout:2e4,url:"service.php",data:{Cmd:11},success:function(t){return t.Index<0?-1:(a=t.Extend.Wds,e(),void n())}})}function e(){o.attr({width:o.width(),height:o.height()}),s=o.get(0).getContext("2d"),s.textBaseline="middle";for(var t=[40,25],e=a.replace(/\n|，|；|。| /g,"\n").split("\n"),n=0;n<e.length;n++)for(var r=[80,s.canvas.height-t[1]*(e.length-n+1)],l=0;l<e[n].length;l++){var c=e[n].charAt(l),f=[i(64,128).toString(),i(64,192).toString(),i(64,255).toString(),i(.2,.9,2).toString()],h=i(20,50),u={Chr:c,DftLct:[r[0]+l*t[0]+i(-5,5),r[1]+i(-5,5)],Lct:[i(0,s.canvas.width,2),i(0,s.canvas.height,2)],Drct:[i(-1,1,2),i(-1,1,2)],Sz:h,Clr:"rgba("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")",Fnt:"italic bold "+h.toString()+"px sans-serif"};d.push(u)}}function n(){s.clearRect(0,0,s.canvas.width,s.canvas.height),r()}function r(){for(var t=0;t<d.length;t++)d[t].Lct[0]=d[t].DftLct[0],d[t].Lct[1]=d[t].DftLct[1],s.font=d[t].Fnt,s.fillStyle=d[t].Clr,s.shadowOffsetX=0,s.shadowOffsetY=0,s.shadowBlur=0,s.fillText(d[t].Chr,d[t].Lct[0],d[t].Lct[1])}function i(t,e,n){if("number"!=typeof t||"number"!=typeof e)return 0;if("number"!=typeof n&&(n=0),t>e||t>e){var r=t;t=e,e=r}var i=e-t,a=Math.random()*i+t;if(0===n)a=Math.floor(a);else if(n>0){var o=Math.pow(10,n);a=Math.floor(a*o)/o}return a}var a="",o=$("canvas#GdWds"),s=null,d=[];return t(),0}function ArtCornerSet(){function t(){$.ajax({type:"POST",dataType:"json",timeout:2e4,url:"service.php",data:{Cmd:6},success:function(t){return t.Index<0?-1:void e.css("backgroundImage",'url("'+t.Extend.ImgURL+'")').children().text(t.Extend.Ttl+"\n"+t.Extend.Dt.substr(0,10)+"\nby "+t.Extend.Atr)}})}var e=$("#AtCnr"),n=$("#AtCnrChk");return n.on({mouseenter:function(){e.children().show()},mouseleave:function(){e.children().hide()}}),t(),e}function KeyboardCommand(t){function e(t){var e=n.data("KyBfr")+t.keyCode.toString(16),r=["41444d494e","525a","55504c4f4144"],i=0;for(var a in r)i=Math.max(i,r[a].length);e.length>i&&(e=e.substr(2)),e.indexOf(r[0])>=0?(n.data("KyBfr",""),PageTurn("admin.php")):e.indexOf(r[1])>=0?(n.data("KyBfr",""),PageTurn("rz.php")):e.indexOf(r[2])>=0?(n.data("KyBfr",""),PageTurn("upload/upload.php")):n.data("KyBfr",e)}if("string"!=typeof t)return 0;var n=$(document),r=function(){};return(0===t.length||"index.php"===t)&&(r=e),n.data("KyBfr","").keyup(r),0}